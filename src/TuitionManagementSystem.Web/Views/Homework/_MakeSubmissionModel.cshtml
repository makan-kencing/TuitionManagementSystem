@model TuitionManagementSystem.Web.Features.Homework.MakeSubmissionViewModel

<div class="modal-dialog modal-lg modal-dialog-centered" role="document">
    <div class="modal-content">
        <div class="modal-header">
            <h5 class="modal-title">Make Submission</h5>
        </div>

        <div class="modal-body">
            <form id="make-submission"
                  hx-post
                  hx-controller="Homework"
                  hx-action="MakeSubmission">
                <input type="hidden" asp-for="AssignmentId">

                <div class="form-floating">
                    <textarea asp-for="Content" class="form-control"></textarea>
                    <label asp-for="Content"></label>
                </div>

                <div id="file-list"></div>
            </form>

            <form id="file-form"
                  hx-post hx-controller="File" hx-action="Upload"
                  hx-target="#file-list" hx-swap="beforeend" hx-encoding="multipart/form-data">
                <input type="file" name="files">

                <button type="submit">Upload</button>

                <progress id="progress" value="0" max="100"></progress>
            </form>

            <script>
                htmx.on('#file-form', 'htmx:xhr:progress', function (event) {
                    htmx.find('#file-form #progress').setAttribute('value', event.detail.loaded / event.detail.total * 100)
                });
            </script>
        </div>

        <div class="modal-footer">
            <button type="button" class="btn text-primary" data-bs-dismiss="modal">Cancel</button>
            <button type="submit" class="btn btn-danger" data-bs-dismiss="modal" form="make-submission">Submit</button>
        </div>
    </div>
</div>



